# 第7章 中央处理器（CPU）- 专项练习

老师在录音里称第七章为**全书的精华**，是逻辑与物理转换的最后一关。

他特别强调：**大题必考微指令格式设计（字段直接编码法）和指令执行过程的微操作序列分析**。基础题部分，老师反复点名了：**寄存器可见性、指令周期/机器周期的辩证关系、20/80原则、以及微程序控制器的基本组成。**

---

## 一、填空题（每空 1 分）

<FillInTheBlank
  :number="1"
  question="CPU 的基本功能包括指令控制、操作控制、_________ 控制、数据加工和中断处理。"
  answer="时序"
  explanation="控制器的三大支柱：指令控制、操作控制、时序控制。时序控制确保各操作按正确顺序执行。"
/>

<FillInTheBlank
  :number="2"
  question="在 CPU 的五个专用寄存器中，_________ 和 _________ 对汇编语言程序员是可见的。"
  :answer='["PC", "PSW"]'
  explanation="录音陷阱：IR、MAR、MDR是内部寄存器，对程序员透明。只有PC（程序计数器）和PSW（程序状态字）对汇编语言程序员可见。"
/>

<FillInTheBlank
  :number="3"
  question="_________ 是指取一条指令并执行完该指令所需的全部时间。"
  answer="指令周期"
  explanation="指令周期包括取指周期和执行周期，是完成一条指令所需的总时间。"
/>

<FillInTheBlank
  :number="4"
  question="取指阶段的操作对所有指令都是相同的，因此被称为 _________。"
  answer="公共操作"
  explanation="录音重点：硬件定死，不可变更。取指操作是公共操作，所有指令都需要执行。"
/>

<FillInTheBlank
  :number="5"
  question="组合逻辑控制器的优点是 _________；微程序控制器的优点是 _________。"
  :answer='["速度快", "规整/灵活（易扩充）"]'
  explanation="组合逻辑控制器速度快但设计复杂；微程序控制器规整、灵活、易扩充，但速度相对较慢。"
/>

<FillInTheBlank
  :number="6"
  question="微程序控制技术中，将一条机器指令编写成一段 _________，存放在 _________ 中。"
  :answer='["微程序", "控制存储器（CM）"]'
  explanation="微程序由微指令组成，存放在控制存储器（CM）中，在CPU芯片内部。"
/>

<FillInTheBlank
  :number="7"
  question="在微指令的操作控制字段编码中，_________ 法能兼顾微指令字长和并行操作能力，是目前最常用的方法。"
  answer="字段直接编码"
  explanation="字段直接编码法是三板斧的最佳选择，既能缩短微指令字长，又能保持一定的并行操作能力。"
/>

<FillInTheBlank
  :number="8"
  question="字段直接编码法要求：将 _________ 的微命令安排在同一段内，且每段要留出一个状态表示 _________。"
  :answer='["互斥", "不操作"]'
  explanation="字段编码的两大硬性规定：互斥的微命令放在同一段，每段留出一个状态（通常为000）表示不操作。"
/>

<FillInTheBlank
  :number="9"
  question="精简指令系统计算机（RISC）遵循 _________ 原则，即 20% 的简单指令占据了 80% 的使用频率。"
  answer="20/80"
  explanation="RISC遵循20/80原则，优化常用指令，简化指令系统，提高执行效率。"
/>

<FillInTheBlank
  :number="10"
  question="指令流水线有三种相关的冲突，分别是结构相关、_________ 相关和 _________ 相关。"
  :answer='["数据", "控制"]'
  explanation="流水线三大冲突：结构相关（资源冲突）、数据相关（数据依赖）、控制相关（分支跳转）。"
/>

---

## 二、单项选择题（每题 2 分）

<MultipleChoiceQuestion
  :number="1"
  question="（核心考点：寄存器可见性）老师强调透明性。下列寄存器中，程序员不可见的是（ ）。"
  :options='[
    { key: "A", text: "PC（程序计数器）" },
    { key: "B", text: "PSW（状态寄存器）" },
    { key: "C", text: "IR（指令寄存器）", explanation: "IR、MAR、MDR是内部寄存器，属于透明硬件，对程序员不可见。只有PC和PSW对汇编语言程序员可见。" },
    { key: "D", text: "通用寄存器组" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="2"
  question="（重点：微命令与微操作）关于微命令和微操作，下列描述准确的是（ ）。"
  :options='[
    { key: "A", text: "微命令是微操作的控制信号，两者一一对应", explanation: "录音原文：微命令是逻辑描述，微操作是物理动作。微命令是微操作的控制信号，两者一一对应。" },
    { key: "B", text: "一个微指令只能包含一个微命令" },
    { key: "C", text: "微操作可以再进一步拆分" },
    { key: "D", text: "微程序存放在主存中" }
  ]'
  correct-answer="A"
/>

<MultipleChoiceQuestion
  :number="3"
  question="（时间指标：周期关系）老师强调定性与定量。指令周期、机器周期、时钟周期三者的大小关系通常是（ ）。"
  :options='[
    { key: "A", text: "指令周期 > 机器周期 > 时钟周期", explanation: "指令周期包含机器周期，机器周期包含时钟周期。指令周期 ≥ 机器周期 ≥ 时钟周期。" },
    { key: "B", text: "时钟周期 > 机器周期 > 指令周期" },
    { key: "C", text: "三者相等" },
    { key: "D", text: "机器周期 > 指令周期 > 时钟周期" }
  ]'
  correct-answer="A"
/>

<MultipleChoiceQuestion
  :number="4"
  question="（计算：字段编码法）某字段包含 7 个互斥的微命令，若采用字段直接编码法，该字段至少需占（ ）位。"
  :options='[
    { key: "A", text: "2" },
    { key: "B", text: "3", explanation: "需要留出一个000状态代表无操作，共计8个状态（7个微命令+1个不操作），2^3=8，所以需要3位。" },
    { key: "C", text: "7" },
    { key: "D", text: "4" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="5"
  question="（核心原理：微程序入口）执行完取指微程序后，根据机器指令的（ ）寻找对应微程序的入口地址。"
  :options='[
    { key: "A", text: "地址码" },
    { key: "B", text: "寻址特征" },
    { key: "C", text: "操作码（OP）", explanation: "操作码译码后，通过微地址形成部件产生入口。不同操作码对应不同的微程序入口地址。" },
    { key: "D", text: "状态位" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="6"
  question="（性能指标：流水线）某 5 段流水线各段执行时间分别为 10ns、8ns、12ns、10ns、10ns，则该流水线的时钟周期至少为（ ）。"
  :options='[
    { key: "A", text: "8ns" },
    { key: "B", text: "10ns" },
    { key: "C", text: "12ns", explanation: "流水线木桶效应：周期取决于最慢的一段。最慢的一段是12ns，所以时钟周期至少为12ns。" },
    { key: "D", text: "50ns" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="7"
  question="（架构对比：RISC）下列属于 RISC（精简指令系统）特点的是（ ）。"
  :options='[
    { key: "A", text: "指令长度不固定" },
    { key: "B", text: "访存指令不受限制" },
    { key: "C", text: "大多数指令在一个周期内完成", explanation: "RISC核心：简单、等长、单周期、寄存器操作。大多数指令在一个周期内完成，只有访存指令需要多个周期。" },
    { key: "D", text: "寻址方式种类繁多" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="8"
  question="（公共操作：PC 更新）老师提到PC+1的陷阱。取指周期中，修改 PC 的目的是（ ）。"
  :options='[
    { key: "A", text: "改变程序执行流" },
    { key: "B", text: "指向下一条指令的地址", explanation: "若不更新，CPU会死循环取同一条指令。PC更新后指向下一条指令的地址，保证程序顺序执行。" },
    { key: "C", text: "保存当前断点" },
    { key: "D", text: "访问操作数地址" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="9"
  question="（微程序控制器组成）存放微程序的存储器称为（ ）。"
  :options='[
    { key: "A", text: "主存（MM）" },
    { key: "B", text: "控存（CM）", explanation: "Control Memory（CM），在CPU芯片内部，存放微程序。" },
    { key: "C", text: "缓存（Cache）" },
    { key: "D", text: "虚拟存储器" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="10"
  question="（综合逻辑：单周期处理器）录音提到：单周期处理器的 CPI 恒等于（ ）。"
  :options='[
    { key: "A", text: "0.5" },
    { key: "B", text: "1", explanation: "每个时钟周期完成一条指令，即CPI=1。单周期处理器中，所有指令都在一个时钟周期内完成。" },
    { key: "C", text: "2" },
    { key: "D", text: "不确定" }
  ]'
  correct-answer="B"
/>

---

## 参考答案与解析

### 一、填空题

1. **时序**（控制器的三大支柱：指令、操作、时序）
2. **PC、PSW**（录音陷阱：IR、MAR、MDR 对程序员透明）
3. **指令周期**
4. **公共操作**（录音重点：硬件定死，不可变更）
5. **速度快、规整/灵活（易扩充）**
6. **微程序、控制存储器（CM）**
7. **字段直接编码**（三板斧的最佳选择）
8. **互斥、不操作**（字段编码的两大硬性规定）
9. **20/80**
10. **数据、控制**（流水线三大冲突）

### 二、选择题

1. **C** - IR、MAR、MDR 是内部寄存器，属于透明硬件
2. **A** - 录音原文：微命令是逻辑描述，微操作是物理动作
3. **A** - 指令周期包含机器周期，机器周期包含时钟周期
4. **B** - 需要留出一个 $000$ 状态代表无操作，共计 8 个状态，$2^3=8$
5. **C** - 操作码译码后，通过微地址形成部件产生入口
6. **C** - 流水线木桶效应：周期取决于最慢的一段
7. **C** - RISC 核心：简单、等长、单周期、寄存器操作
8. **B** - 若不更新，CPU 会死循环取同一条指令
9. **B** - Control Memory，在 CPU 芯片内部
10. **B** - 每个时钟周期完成一条指令，即 CPI=1

---

## 重点提示

1. **寄存器可见性**：
   - **可见**：PC（程序计数器）、PSW（程序状态字）、通用寄存器
   - **不可见（透明）**：IR（指令寄存器）、MAR（内存地址寄存器）、MDR（内存数据寄存器）

2. **指令周期/机器周期/时钟周期关系**：
   - 指令周期 ≥ 机器周期 ≥ 时钟周期
   - 指令周期包含多个机器周期
   - 机器周期包含多个时钟周期

3. **微程序控制器**：
   - 微程序存放在控制存储器（CM）中
   - 微指令由操作控制字段和顺序控制字段组成
   - 字段直接编码法：互斥微命令放在同一段，每段留出一个状态表示不操作

4. **字段编码法计算**：
   - 如果有 $n$ 个互斥微命令，需要 $n+1$ 个状态（包括不操作）
   - 字段位数 = $\lceil \log_2(n+1) \rceil$

5. **RISC 特点**：
   - 遵循 20/80 原则
   - 指令长度固定
   - 大多数指令单周期完成
   - 只有访存指令可以访问内存
   - 寻址方式简单

6. **流水线性能**：
   - 时钟周期 = 最慢段的执行时间（木桶效应）
   - 加速比 = 顺序执行时间 / 流水线执行时间

7. **微程序入口**：
   - 根据操作码（OP）寻找微程序入口地址
   - 操作码译码后，通过微地址形成部件产生入口

8. **PC 更新**：
   - 取指周期中必须更新 PC，指向下一条指令
   - 若不更新，CPU 会死循环取同一条指令

---

## 🎉 全书复习大通关！

你已经完成了所有核心章节（第1-8章）的练习。根据老师在录音里的最后叮嘱，给你的**考前冲刺 3 点建议**：

1. **死磕计算过程：** 第 4 章的补码乘除法、第 6 章的平均访问时间。
2. **死磕连线标注：** 第 5 章存储器扩展图，注意那些小圆圈和 $R/\overline{W}$ 标注。
3. **死磕华为 5%：** 确保知道 **ARM、RISC、64位、泰山核、SOC** 这些关键词。

**需要我针对这几章的大题（计算/画图题）再给你一些答题模板或步骤解析吗？**
