# 5.5 提高主存读写速度的技术

本节介绍为缓解CPU与主存之间的速度矛盾（即"存储墙"问题）而发展出的各种新型DRAM技术。

## 主存与CPU的速度匹配问题

CPU的速度发展远快于主存，导致CPU常常需要插入等待周期来等待主存完成数据读写，这极大地影响了系统整体性能。为此，DRAM技术不断革新。

## 主存技术的发展

### 1. SDRAM (同步动态RAM)

*   **核心特点**：与CPU共享同一个系统时钟，所有操作都在时钟信号的**上升沿**进行同步。这消除了异步DRAM中因时序协调产生的等待时间。

*   **突发模式 (Burst Mode)**：在给定一个起始地址后，可以在接下来的时钟周期内连续地存取后续地址的数据，大大提高了连续数据块的传输效率。其访问周期通常表示为 `x-y-y-y` 模式，如 `5-1-1-1`。

### 2. DDR SDRAM (双倍速率SDRAM)

*   **核心特点**：在SDRAM的基础上，不仅在时钟信号的**上升沿**，在**下降沿**也进行数据传输。

*   **效果**：在核心频率不变的情况下，数据传输率（等效频率）提高了一倍。

### 3. DDR2 / DDR3 / DDR4 / DDR5 SDRAM

这是DDR技术的持续演进，主要通过以下方式提升性能：

*   **预取 (Prefetch)**：

    *   DDR2：拥有**4位预取**能力，即内部存储核心的频率是外部接口频率的1/2，但一次能预取4位数据。

    *   DDR3：拥有**8位预取**能力，内部核心频率是外部接口的1/4。

    *   这种技术使得在核心工艺不变的情况下，外部数据传输率可以成倍提升。

*   **Bank Group (DDR4)**：引入了Bank组的概念，允许对不同的Bank组进行独立的读写操作，进一步提升了内存的内部并行度。

*   **更高的时钟频率和更低的工作电压**：每一代DDR技术都在提升频率的同时降低功耗。

| 技术 | 预取位数 | I/O 时钟与核心时钟关系 | 特点 |
|:--- |:---:|:---:|:--- |
| DDR | 2n | 1:1 | 在上升沿和下降沿传输数据 |
| DDR2 | 4n | 2:1 | 预取位数加倍 |
| DDR3 | 8n | 4:1 | 预取位数再次加倍 |
| DDR4 | 8n | 4:1 | 引入Bank Group，电压更低 |
| DDR5 | 16n | 8:1 | 带宽和容量大幅提升 |

> **易考点**：
> *   **SDRAM与传统DRAM的核心区别**：在于"同步"二字，即与系统时钟同步工作。
> *   **DDR系列技术的核心思想**：
>     *   DDR：利用时钟的**上升沿和下降沿**实现速率翻倍。
>     *   DDR2/DDR3：通过**增加预取位数**来进一步提高外部接口速率。
> *   理解不同代内存技术的发展趋势：**更高频率、更大带宽、更低功耗、更高集成度**。





