# 第5章 主存储器 - 专项练习

老师在录音里强调，第五章**主存储器**是整本书最能体现动手能力的一章。

他特别提醒：**大题必考存储器扩展（字位同时扩展）及与CPU的连接图**。在基础题部分，老师重点提到了：**$T_m > T_a$ 的原因、DRAM 的刷新规律（行刷新、异步刷新）、大端/小端方案的辨析，以及地址重叠现象的由来**。

---

## 一、填空题（每空 1 分）

<FillInTheBlank
  :number="1"
  question="主存储器由存储体、_________ 译码驱动电路和 _________ 电路三部分组成。"
  :answer='["地址", "读写（或控制）"]'
  explanation="主存储器的三大组成部分：存储体存储数据，地址译码驱动电路选择存储单元，读写控制电路控制数据流向。"
/>

<FillInTheBlank
  :number="2"
  question="评价主存速度的指标中，存取周期 $T_m$ 总是 _________（大于/等于/小于）存取时间 $T_a$。"
  answer="大于"
  explanation="录音重点：因为读写后需要恢复时间或预充电，所以 $T_m > T_a$。存取周期包括存取时间和恢复时间。"
/>

<FillInTheBlank
  :number="3"
  question="现代计算机多采用字节编址。_________ 方案将高位字节存放在低地址单元，而 _________ 方案将低位字节存放在低地址单元。"
  :answer='["大端", "小端"]'
  explanation="大端：高在低（高位字节在低地址）；小端：低在低（低位字节在低地址）。"
/>

<FillInTheBlank
  :number="4"
  question="SRAM 靠 _________ 存储信息，而 DRAM 靠 _________ 存储信息。"
  :answer='["双稳态触发器", "电荷（或电容）"]'
  explanation="SRAM使用双稳态触发器存储，不需要刷新；DRAM使用电容存储电荷，需要定期刷新。"
/>

<FillInTheBlank
  :number="5"
  question="动态 RAM（DRAM）必须定期刷新，刷新的单位是 _________。"
  answer="行"
  explanation="不是位，也不是字，录音强调过：DRAM刷新以行为单位，每次刷新一行。"
/>

<FillInTheBlank
  :number="6"
  question="DRAM 的三种刷新方式中，_________ 刷新由于将刷新操作平均分配到 2ms 内，死区最小，效率最高。"
  answer="异步"
  explanation="异步刷新是最佳方案，将刷新操作均匀分布，死区仅一个存取周期，效率最高。"
/>

<FillInTheBlank
  :number="7"
  question="在存储器扩展中，若芯片字数满足要求但位数不足，需采用 _________ 扩展。"
  answer="位"
  explanation="地址并联，数据分开。位扩展时，多个芯片的地址线并联，数据线分别连接到数据总线的不同位。"
/>

<FillInTheBlank
  :number="8"
  question="采用 _________ 译码方式片选时，由于高位地址线未全部使用，会导致同一个存储单元对应多个地址，这种现象称为 _________。"
  :answer='["部分", "地址重叠"]'
  explanation="第五章设计题常见陷阱：部分译码时，未使用的高位地址线可以任意取值，导致地址重叠。"
/>

<FillInTheBlank
  :number="9"
  question="CPU 访问主存时，由 _________ 提供地址，数据交换的缓冲部件是 _________。"
  :answer='["MAR", "MDR"]'
  explanation="Memory Address Register（MAR）提供地址，Memory Data Register（MDR）作为数据缓冲。"
/>

<FillInTheBlank
  :number="10"
  question="为了减少芯片引脚数，大容量 DRAM 芯片通常采用 _________ 技术，将行、列地址分两次送入。"
  answer="地址复用（或地址线重用）"
  explanation="地址复用技术：分行地址、列地址两次送入，减少地址线数量，降低芯片封装成本。"
/>

---

## 二、单项选择题（每题 2 分）

<MultipleChoiceQuestion
  :number="1"
  question="（核心辨析：SRAM vs DRAM）老师提到Cache的生产工艺。常用于做 Cache 的存储器是（ ）。"
  :options='[
    { key: "A", text: "DRAM" },
    { key: "B", text: "SRAM", explanation: "SRAM速度快、价格贵、集成度低，适合做Cache。DRAM速度慢但容量大，适合做主存。" },
    { key: "C", text: "ROM" },
    { key: "D", text: "CD-ROM" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="2"
  question="（重点：DRAM 刷新时间）若 DRAM 芯片的刷新周期为 2ms，存取周期为 0.5μs，存储矩阵为 128×128，采用集中刷新，则死区时间为（ ）。"
  :options='[
    { key: "A", text: "64μs", explanation: "集中刷新：128行 × 0.5μs = 64μs。死区 = 总行数 × 存取周期。" },
    { key: "B", text: "2ms" },
    { key: "C", text: "0.5μs" },
    { key: "D", text: "32μs" }
  ]'
  correct-answer="A"
/>

<MultipleChoiceQuestion
  :number="3"
  question="（地址线计算陷阱）某存储器容量为 64KB，按字节编址。若采用 16K×4 位的存储芯片，则该存储器需要（ ）根地址线。"
  :options='[
    { key: "A", text: "14" },
    { key: "B", text: "16", explanation: "64KB = 2^16 B，所以需要16根地址线。注意：问的是存储器，不是芯片。芯片只需要14根地址线（16K=2^14）。" },
    { key: "C", text: "15" },
    { key: "D", text: "12" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="4"
  question="（大端/小端陷阱）老师强调低对低。十六进制数 0x12345678 存放在 4000H 开始的单元中，若在 4000H 处读出的数据是 0x78，说明采用的是（ ）。"
  :options='[
    { key: "A", text: "大端方案" },
    { key: "B", text: "小端方案", explanation: "低字节0x78存在低地址4000H，符合小端方案：低在低（低位字节在低地址）。大端方案是高位字节在低地址。" },
    { key: "C", text: "随机方案" },
    { key: "D", text: "字节方案" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="5"
  question="（芯片扩展计算）用 2K×4 位的芯片组成 8K×8 位的存储器，共需（ ）片芯片。"
  :options='[
    { key: "A", text: "4" },
    { key: "B", text: "8", explanation: "字扩展：8K/2K = 4；位扩展：8/4 = 2。总共需要 4×2 = 8 片芯片。" },
    { key: "C", text: "16" },
    { key: "D", text: "32" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="6"
  question="（存储器连线规范）老师强调无中生有。在主存扩展连线图中，只读存储器（ROM）芯片不应连接的信号线是（ ）。"
  :options='[
    { key: "A", text: "地址线" },
    { key: "B", text: "片选线 $CS$" },
    { key: "C", text: "写允许线 $WE$", explanation: "录音严厉警告：给ROM接$WE$线一分不给，ROM只能读不能写，不需要写允许信号。" },
    { key: "D", text: "数据线" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="7"
  question="（译码器应用）欲产生 8 个片选信号，需使用（ ）译码器。"
  :options='[
    { key: "A", text: "2-4 译码器" },
    { key: "B", text: "3-8 译码器", explanation: "2^3 = 8，需要3根输入线，产生8个输出信号，使用3-8译码器。" },
    { key: "C", text: "4-16 译码器" },
    { key: "D", text: "5-32 译码器" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="8"
  question="（性能指标：带宽）若主存位宽为 32 位，存取周期为 200ns，则主存带宽（数据传输率）为（ ）。"
  :options='[
    { key: "A", text: "160Mbps" },
    { key: "B", text: "20MB/s", explanation: "带宽 = (32 bit / 8) / 200ns = 4B / (2×10^-7 s) = 20 MB/s。" },
    { key: "C", text: "40MB/s" },
    { key: "D", text: "10MB/s" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="9"
  question="（存储类型）断电后信息不丢失的存储器是（ ）。"
  :options='[
    { key: "A", text: "DRAM" },
    { key: "B", text: "SRAM" },
    { key: "C", text: "Flash Memory", explanation: "闪存是非易失性的，断电后信息不丢失。DRAM和SRAM都是易失性的，断电后信息丢失。" },
    { key: "D", text: "以上都不是" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="10"
  question="（地址映射逻辑）老师提到逻辑属于主存，物理属于CPU。MAR 和 MDR 在计算机系统中的位置描述准确的是（ ）。"
  :options='[
    { key: "A", text: "逻辑上属于主存，物理上集成在 CPU 内", explanation: "经典的系统划分概念：MAR和MDR逻辑上属于主存系统，但物理上集成在CPU内部，用于CPU与主存之间的接口。" },
    { key: "B", text: "逻辑上属于 CPU，物理上在主存板上" },
    { key: "C", text: "物理和逻辑均属于主存" },
    { key: "D", text: "物理和逻辑均属于外设" }
  ]'
  correct-answer="A"
/>

---

## 参考答案与解析

### 一、填空题

1. **地址、读写（或控制）**
2. **大于**（录音重点：因为读写后需要恢复时间或预充电）
3. **大端、小端**（大端：高在低；小端：低在低）
4. **双稳态触发器、电荷（或电容）**
5. **行**（不是位，也不是字，录音强调过）
6. **异步**（最佳方案，死区仅一个存取周期）
7. **位**（地址并联，数据分开）
8. **部分、地址重叠**（第五章设计题常见陷阱）
9. **MAR、MDR**（Memory Address/Data Register）
10. **地址复用（或地址线重用）**（分行地址、列地址两次送入）

### 二、选择题

1. **B** - SRAM 快、贵、集成度低
2. **A** - 128 行 × 0.5μs = 64μs。死区 = 总行数 × 存取周期
3. **B** - $64KB = 2^{16} B$，所以需要 16 根。注意：问的是存储器，不是芯片
4. **B** - 低字节 `78` 存在低地址 `4000H`
5. **B** - $(8K/2K) \times (8/4) = 4 \times 2 = 8$ 片
6. **C** - 录音严厉警告：给 ROM 接 $WE$ 线一分不给，ROM 只能读
7. **B** - $2^3 = 8$
8. **B** - $(32 bit / 8) / 200ns = 4B / (2 \times 10^{-7}s) = 20 MB/s$
9. **C** - 闪存是非易失性的，RAM 都是易失性的
10. **A** - 经典的系统划分概念

---

## 重点提示

1. **$T_m > T_a$ 的原因**：
   - 存取周期包括存取时间和恢复时间
   - 恢复时间用于预充电或稳定电路状态

2. **DRAM 刷新**：
   - 刷新单位：行（不是位或字）
   - 三种方式：集中刷新、分散刷新、异步刷新
   - 异步刷新效率最高，死区最小

3. **大端/小端方案**：
   - 大端：高位字节在低地址（高在低）
   - 小端：低位字节在低地址（低在低）
   - 判断方法：看低地址存放的是高字节还是低字节

4. **地址重叠**：
   - 部分译码时，未使用的高位地址线可以任意取值
   - 导致同一个存储单元对应多个地址
   - 设计题常见陷阱

5. **存储器扩展**：
   - 字扩展：地址线分开，数据线并联
   - 位扩展：地址线并联，数据线分开
   - 字位同时扩展：先字扩展，再位扩展

6. **ROM 连线规范**：
   - ROM 只能读不能写
   - 不应连接写允许线 $WE$
   - 这是设计题的重要扣分点
