# 第8章 总线与输入/输出系统 - 专项练习

老师在录音里强调，第八章**总线与输入/输出系统**虽然内容杂，但考点非常集中。

他特别提醒：**中断（Interrupt）与 DMA 方式的区别是每年必考的送分题**。此外，**总线仲裁方式（三种）、I/O 编址方式（独立 vs 统一）、以及磁盘寻道/旋转时间的计算**也是基础题的核心。

---

## 一、填空题（每空 1 分）

<FillInTheBlank
  :number="1"
  question="总线是多个部件分时共享的传输介质，其主要由 _________ 总线、数据总线和控制总线组成。"
  answer="地址"
  explanation="三大总线必记：地址总线、数据总线、控制总线。地址总线传输地址信息，数据总线传输数据，控制总线传输控制信号。"
/>

<FillInTheBlank
  :number="2"
  question="衡量总线传输能力的重要指标是 _________，它等于总线位宽与工作频率的乘积。"
  answer="总线带宽"
  explanation="总线带宽 = 总线位宽 × 工作频率，表示单位时间内传输的数据量。"
/>

<FillInTheBlank
  :number="3"
  question="集中式总线仲裁中，_________ 方式对电路故障最敏感，_________ 方式响应速度最快。"
  :answer='["链式查询", "独立请求"]'
  explanation="录音陷阱：链式查询对故障敏感（一个故障影响后续设备），独立请求线最多但响应速度最快（并行查询）。"
/>

<FillInTheBlank
  :number="4"
  question="总线定时控制中，_________ 定时利用统一时钟控制，而 _________ 定时靠握手信号实现。"
  :answer='["同步", "异步"]'
  explanation="同步定时使用统一时钟，简单但速度受限；异步定时使用握手信号，灵活但复杂。"
/>

<FillInTheBlank
  :number="5"
  question="将 I/O 端口地址看作主存地址的一部分，不需专用 I/O 指令的编址方式称为 _________。"
  answer="统一编址（或存储器映射编址）"
  explanation="统一编址将I/O端口和主存统一编址，使用相同的地址空间和访问指令，不需要专用的I/O指令。"
/>

<FillInTheBlank
  :number="6"
  question="中断处理全过程包括：中断请求、中断判优、_________、中断处理和中断返回。"
  answer="中断响应"
  explanation="中断处理流程：请求 → 判优 → 响应 → 处理 → 返回。中断响应阶段由硬件完成中断隐指令。"
/>

<FillInTheBlank
  :number="7"
  question="在中断响应阶段，由硬件自动完成的关中断、保护断点、寻址服务程序的操作称为 _________。"
  answer="中断隐指令"
  explanation="录音重点：中断隐指令由硬件完成，不可编程，包括关中断、保护断点（PC）、寻址服务程序入口。"
/>

<FillInTheBlank
  :number="8"
  question="中断优先级中，_________ 优先级反映了响应次序，而 _________ 反映了实际处理次序。"
  :answer='["硬件（或响应）", "屏蔽码（或处理）"]'
  explanation="硬件优先级决定响应次序，屏蔽码（软件设置）决定实际处理次序。可以通过修改屏蔽码动态改变处理次序。"
/>

<FillInTheBlank
  :number="9"
  question="DMA 控制器与 CPU 争用主存时，采用 _________ 方式可以提高 CPU 的工作效率，即 DMA 占用一个存取周期进行传输。"
  answer="周期挪用（或周期窃取）"
  explanation="DMA重点，常考计算：周期挪用方式下，DMA占用一个存取周期进行传输，CPU暂停一个存取周期，但可以继续执行不需要访存的指令。"
/>

<FillInTheBlank
  :number="10"
  question="大中型计算机中，为了进一步减轻 CPU 对外设管理的负担，常引入 _________（处理器）。"
  answer="通道（Channel）"
  explanation="通道是专门用于I/O管理的处理器，可以进一步减轻CPU负担，实现更高效的I/O管理。"
/>

---

## 二、单项选择题（每题 2 分）

<MultipleChoiceQuestion
  :number="1"
  question="（核心辨析：独立 vs 统一）老师强调专用指令。独立编址方式下，访问 I/O 端口必须使用（ ）。"
  :options='[
    { key: "A", text: "MOVE 指令" },
    { key: "B", text: "IN/OUT 指令", explanation: "Intel x86是代表，独立编址需要专用I/O指令（IN/OUT）。统一编址可以使用普通访存指令。" },
    { key: "C", text: "JMP 指令" },
    { key: "D", text: "访存指令" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="2"
  question="（重点：中断响应时间）老师反复强调。CPU 响应可屏蔽中断的请求，通常是在（ ）。"
  :options='[
    { key: "A", text: "机器周期末" },
    { key: "B", text: "指令周期末", explanation: "中断要保证指令执行完整，否则现场难恢复。CPU在指令周期末检查中断请求，确保当前指令完整执行。" },
    { key: "C", text: "时钟周期末" },
    { key: "D", text: "存取周期末" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="3"
  question="（重点：DMA 响应时间）与上题对比。CPU 响应 DMA 请求，通常是在（ ）。"
  :options='[
    { key: "A", text: "机器周期末", explanation: "DMA只是抢总线传个数，机器周期末就能响应。DMA响应比中断快，因为不需要保护现场等复杂操作。" },
    { key: "B", text: "指令周期末" },
    { key: "C", text: "程序结束时" },
    { key: "D", text: "指令译码时" }
  ]'
  correct-answer="A"
/>

<MultipleChoiceQuestion
  :number="4"
  question="（优先级排序）下列请求中，优先级最高的是（ ）。"
  :options='[
    { key: "A", text: "中断请求" },
    { key: "B", text: "DMA 请求", explanation: "DMA响应快、级别高。DMA请求优先级高于中断请求，因为DMA传输时间短，对系统影响小。" },
    { key: "C", text: "软件中断" },
    { key: "D", text: "以上一样高" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="5"
  question="（计算：磁盘存取时间）磁盘转速为 7200r/min，平均寻道时间为 8ms，则平均存取时间约为（ ）。"
  :options='[
    { key: "A", text: "8ms" },
    { key: "B", text: "12.2ms", explanation: "旋转一周时间 = 60s / 7200 = 8.33ms，平均旋转延迟 = 8.33ms / 2 = 4.17ms；平均存取时间 = 寻道时间 + 旋转延迟 = 8ms + 4.17ms = 12.17ms ≈ 12.2ms。" },
    { key: "C", text: "16.3ms" },
    { key: "D", text: "4.2ms" }
  ]'
  correct-answer="B"
/>

<MultipleChoiceQuestion
  :number="6"
  question="（中断逻辑：屏蔽字）通过设置（ ），可以动态改变多重中断的处理次序。"
  :options='[
    { key: "A", text: "中断请求位" },
    { key: "B", text: "中断允许位" },
    { key: "C", text: "中断屏蔽字", explanation: "录音大题考点：先响应后处理，改屏蔽字。硬件优先级决定响应次序，屏蔽字决定处理次序，可以通过修改屏蔽字动态改变处理次序。" },
    { key: "D", text: "优先级寄存器" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="7"
  question="（总线控制信号）链式查询总线仲裁中，由总线控制器发出的响应信号是（ ）。"
  :options='[
    { key: "A", text: "$BR$（请求）" },
    { key: "B", text: "$BS$（忙）" },
    { key: "C", text: "$BG$（批准）", explanation: "Bus Grant（$BG$）是总线控制器发出的批准信号，在链式查询中沿总线传递。" },
    { key: "D", text: "$INTR$（中断）" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="8"
  question="（DMA 作用）老师强调硬件实现。在 DMA 传送过程中，主存地址的修改是由（ ）完成的。"
  :options='[
    { key: "A", text: "CPU" },
    { key: "B", text: "操作系统" },
    { key: "C", text: "DMA 控制器", explanation: "DMA控制器内部有地址计数器，自动修改主存地址。这是DMA硬件实现的关键，不需要CPU干预。" },
    { key: "D", text: "存储器" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="9"
  question="（中断隐指令任务）下列由中断隐指令（硬件）自动完成的任务是（ ）。"
  :options='[
    { key: "A", text: "保护通用寄存器" },
    { key: "B", text: "恢复现场" },
    { key: "C", text: "保护程序断点（PC）", explanation: "注意：通用寄存器保护由软件/程序员完成，断点保护由硬件完成。中断隐指令自动完成：关中断、保护断点（PC）、寻址服务程序入口。" },
    { key: "D", text: "开中断" }
  ]'
  correct-answer="C"
/>

<MultipleChoiceQuestion
  :number="10"
  question="（综合对比）在程序查询、中断、DMA 三种方式中，对 CPU 占用率最低的是（ ）。"
  :options='[
    { key: "A", text: "程序查询方式" },
    { key: "B", text: "程序中断方式" },
    { key: "C", text: "DMA 方式", explanation: "DMA几乎不影响CPU执行程序，查询方式占用率最高（CPU一直等待）。DMA方式下，CPU只在DMA传输时暂停一个存取周期，其他时间可以继续执行程序。" },
    { key: "D", text: "三者一样" }
  ]'
  correct-answer="C"
/>

---

## 参考答案与解析

### 一、填空题

1. **地址**（三大总线必记）
2. **总线带宽**
3. **链式查询、独立请求**（录音陷阱：独立请求线最多但最快）
4. **同步、异步**
5. **统一编址（或存储器映射编址）**
6. **中断响应**
7. **中断隐指令**（录音重点：硬件完成，不可编程）
8. **硬件（或响应）、屏蔽码（或处理）**
9. **周期挪用（或周期窃取）**（DMA 重点，常考计算）
10. **通道（Channel）**

### 二、选择题

1. **B** - Intel x86 是代表，独立编址需要专用指令
2. **B** - 中断要保证指令执行完整，否则现场难恢复
3. **A** - DMA 只是抢总线传个数，机器周期末就能响应
4. **B** - DMA 响应快、级别高
5. **B** - 旋转一周 $60s/7200 = 8.33ms$，旋转延迟取一半 $4.17ms$；$8ms + 4.17ms = 12.17ms$
6. **C** - 录音大题考点：先响应后处理，改屏蔽字
7. **C** - Bus Grant
8. **C** - DMA 控制器内部有地址计数器
9. **C** - 注意：通用寄存器保护由软件/程序员完成，断点保护由硬件完成
10. **C** - DMA 几乎不影响 CPU 执行程序，查询方式占用率最高

---

## 重点提示

1. **中断 vs DMA 区别**（每年必考送分题）：
   - **中断**：CPU响应时间在指令周期末，需要保护现场，处理完返回
   - **DMA**：CPU响应时间在机器周期末，不需要保护现场，只占用总线

2. **总线仲裁方式**（三种）：
   - **链式查询**：对故障敏感，但连线少
   - **计数器定时查询**：折中方案
   - **独立请求**：响应最快，但连线多

3. **I/O 编址方式**：
   - **独立编址**：需要专用I/O指令（如IN/OUT），I/O地址空间独立
   - **统一编址**：使用普通访存指令，I/O地址是主存地址的一部分

4. **中断处理流程**：
   - 请求 → 判优 → 响应（中断隐指令）→ 处理 → 返回
   - 中断隐指令由硬件自动完成：关中断、保护断点、寻址服务程序

5. **中断优先级**：
   - 硬件优先级：决定响应次序
   - 屏蔽码（软件设置）：决定处理次序
   - 可以通过修改屏蔽字动态改变处理次序

6. **DMA 方式**：
   - 周期挪用：DMA占用一个存取周期，CPU暂停一个存取周期
   - DMA控制器自动修改主存地址
   - 对CPU占用率最低

7. **磁盘存取时间计算**：
   - 平均存取时间 = 寻道时间 + 旋转延迟 + 传输时间
   - 旋转延迟 = 旋转一周时间 / 2
   - 旋转一周时间 = 60s / 转速（r/min）

---

## 🎉 全书复习大通关！

你已经完成了所有核心章节的练习。根据老师在录音里的最后叮嘱，给你的**考前冲刺 3 点建议**：

1. **死磕计算过程：** 第 4 章的补码乘除法、第 6 章的平均访问时间。
2. **死磕连线标注：** 第 5 章存储器扩展图，注意那些小圆圈和 $R/\overline{W}$ 标注。
3. **死磕华为 5%：** 确保知道 **ARM、RISC、64位、泰山核、SOC** 这些关键词。

**需要我针对这几章的大题（计算/画图题）再给你一些答题模板或步骤解析吗？**
