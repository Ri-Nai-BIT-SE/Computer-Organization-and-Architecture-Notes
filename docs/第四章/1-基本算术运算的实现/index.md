# 4.1 基本算术运算的实现

本节介绍计算机中实现算术运算的核心部件——加法器,并深入探讨了提高加法器运算速度的关键技术:并行进位。

## 核心概念

### 1. 基本运算部件:全加器 (Full Adder, FA)

*   **定义**:全加器是能够对两个二进制位 $A_i$、$B_i$ 以及来自低位的进位 $C_{i-1}$ 进行相加的基本逻辑电路。
*   **输出**:产生本位和 $S_i$ 与向高位的进位 $C_i$。
*   **逻辑表达式**:
    *   本位和:$S_i = A_i \oplus B_i \oplus C_{i-1}$
    *   向高位的进位:$C_i = A_i B_i + (A_i \oplus B_i) C_{i-1}$

### 2. 并行加法器与进位传递

*   **并行加法器**:由多个全加器组成,可同时对操作数的每一位进行运算。
*   **关键问题**:虽然各位是"并行"计算的,但高位的运算必须等待低位的进位信号传来后才能得到最终结果。这种逐位传递进位的过程称为**行波进位 (Ripple-Carry)**,它限制了并行加法器的速度。

### 3. 快速进位:并行进位链 (Carry-Lookahead)

为了解决行波进位的速度瓶颈,引入了并行进位的思想。

*   **进位产生函数 $G_i$**:$G_i = A_i B_i$
    *   当 $A_i$ 和 $B_i$ 都为1时,本位**必然**产生一个进位,与 $C_{i-1}$ 无关。
*   **进位传递函数 $P_i$**:$P_i = A_i \oplus B_i$
    *   当 $A_i$ 和 $B_i$ 中有一个为1时,本位能否向高位传递进位,取决于低位的进位 $C_{i-1}$。
*   **进位逻辑重写**:$C_i = G_i + P_i C_{i-1}$
*   **并行展开**:通过将 $C_{i-1}$ 逐级展开,可以使每一位的进位 $C_i$ 只与初始进位 $C_0$ 以及各位的 $G_i$、$P_i$ 相关。
    *   $C_1 = G_1 + P_1 C_0$
    *   $C_2 = G_2 + P_2 C_1 = G_2 + P_2(G_1 + P_1 C_0) = G_2 + P_2 G_1 + P_2 P_1 C_0$
    *   $C_3 = G_3 + P_3 C_2 = \dots$
    *   这种方式使得所有进位可以"同时"产生,因此称为**先行进位**或**并行进位**。

*   **分组并行进位 (多级先行进位)**
    *   **原因**:当加法器位数很多时(如32位、64位),完全的并行进位逻辑会变得极其复杂。
    *   **方法**:将加法器分成若干小组(如每4位一组)。组内采用并行进位,组间可以采用串行进位(单级先行进位)或更高层次的并行进位(多级先行进位)。
    *   **组进位函数**:定义组的进位产生函数 $G^*$ 和传递函数 $P^*$,实现更高层次的并行进位。

## 易考点与难点

> **难点**:并行进位(先行进位)的逻辑表达式推导是本节的核心难点。需要深刻理解进位产生函数 $G_i$ 和传递函数 $P_i$ 的概念,并掌握如何将串行进位链展开为并行形式。

> **易考点**:
> *   全加器的逻辑表达式是基础,必须掌握。
> *   理解行波进位加法器的主要缺点是速度慢,其延迟与加法器位数 $n$ 成正比。
> *   理解分组并行进位的思想:组内并行,组间串行/并行,是一种在速度和硬件成本之间的折中方案。习题中常出现计算多级先行进位加法器延迟的问题。
