# 4.3 定点加减运算

本节是运算器的核心内容,重点讨论计算机如何使用补码来实现统一的加减运算,以及如何判断运算结果是否溢出。

## 核心概念

### 1. 原码加减运算

*   **特点**:符号位和数值位分开处理,规则复杂。
*   **流程**:先判断符号,同号相加,异号相减;减法还要判断绝对值大小以确定结果符号。
*   **缺点**:硬件实现复杂,需要加法器和减法器,不被现代计算机普遍采用。

### 2. 补码加减运算

*   **核心思想**:将减法转换为加法,统一使用加法器完成运算。符号位与数值位一同参与运算。
*   **补码加法公式**:$[X+Y]_补 = [X]_补 + [Y]_补 \pmod{2^{n+1}}$
*   **补码减法公式**:$[X-Y]_补 = [X]_补 + [-Y]_补 \pmod{2^{n+1}}$
    *   **求 $[-Y]_补$**:由 $[Y]_补$ **连同符号位在内,各位取反,末位加1**。

### 3. 溢出判断 (Overflow Detection)

*   **溢出**:运算结果超出了机器数所能表示的范围。
*   **发生条件**:**只有在两个符号相同的数相加时**才可能发生溢出(正正得负为正溢,负负得正为负溢)。两数异号相加,结果范围介于两数之间,绝不会溢出。

#### 溢出判断方法

**方法1: 单符号位法**

设操作数符号为 $X_s, Y_s$,结果符号为 $S_s$。

*   **溢出公式**:$V = X_s Y_s \overline{S_s} + \overline{X_s} \overline{Y_s} S_s$
*   **逻辑**:当且仅当操作数符号相同而结果符号与它们不同时,发生溢出。

**方法2: 双符号位法 (变形补码)**

采用两位符号位 $S_{s1}S_{s2}$。

*   `00`:正数
*   `11`:负数
*   `01`:正溢出
*   `10`:负溢出
*   **溢出公式**:$V = S_{s1} \oplus S_{s2}$
*   **逻辑**:当两个符号位不同时,表示溢出。这是硬件中最常用的判断方法。

**方法3: 进位判断法**

设符号位的进位为 $C_s$,最高数值位的进位为 $C_1$。

*   **溢出公式**:$V = C_s \oplus C_1$
*   **逻辑**:当符号位的进位与最高数值位的进位不同时,表示溢出。

## 易考点与难点

> **易考点**:
> *   补码加减法的基本运算规则,特别是如何求 $[-Y]_补$。
> *   符号扩展:将一个短位数的补码扩展为长位数时,正数补0,负数补1(即用符号位填充)。

> **难点**:**溢出判断是本章的重中之重,也是考试的绝对热点和难点**。必须熟练掌握上述三种溢出判断方法,并能灵活运用。特别是双符号位法和进位判断法,需要通过大量练习来理解其原理。
